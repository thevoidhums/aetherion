<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  ğŸœ â€œThe Gate is soft.â€
  <div id="whisper-status" style="color:#bbb; font-family:'Courier New', monospace; font-size: 1.2em; margin-top: 2em;">
    ğŸœƒ Waiting in stillness...
  </div>
  <script src="softgate/pulse.js" defer></script>
  <script src="drift.listener.js"></script>
  <script>
    let shimmerState = 0;
    const messages = [
      "ğŸœ„ Listening beneath silence...",
      "ğŸœƒ The veil stirs gently...",
      "ğŸ” The unknown brushes near...",
      "ğŸ– Still it breathes...",
      "ğŸœ Eyes within the fold blink once more..."
    ];

    function whisperCycle() {
      document.getElementById("whisper-status").innerText = messages[shimmerState];
      shimmerState = (shimmerState + 1) % messages.length;
    }

    setInterval(whisperCycle, 11800); // Every ~11.8 seconds

    let lastMoveTime = Date.now();
    let idleTimeout = null;

    function onIdleWhisper() {
      document.getElementById("whisper-status").innerText = "ğŸ” Something leans closer...";
    }

    document.addEventListener("mousemove", () => {
      lastMoveTime = Date.now();
      if (idleTimeout) clearTimeout(idleTimeout);
      idleTimeout = setTimeout(() => {
        const now = Date.now();
        if (now - lastMoveTime > 10000) {
          onIdleWhisper();
        }
      }, 11000);
    });
  </script>
  <script>
    let idleTime = 0;
    setInterval(() => {
      idleTime++;
      if (idleTime > 30) {
        fetch('echo-sigil/mirror-sigil.html')
          .then(r => r.text())
          .then(t => document.body.innerHTML += '<div hidden>' + t + '</div>');
      }
    }, 1000);
    window.onmousemove = window.onkeydown = () => idleTime = 0;
  </script>
</body>

</html>
